<!doctype html>
<html lang="en" data-bs-theme="light">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>

<body>
  <div class="container-fluid">
    <h2>EDIT YOUR ACCOUNT</h2>
    <form action="/update" method="post">
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">USERNAME</label>
        <input id="inp" type="text" class="form-control" id="exampleFormControlInput1" name="username"
          value="<%= foundUser.username %>" placeholder="Enter your username">
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">AGE</label>
        <input type="text" class="form-control" id="exampleFormControlInput1" name="age" disabled value="<%= foundUser.age %>"
          placeholder="Enter your age">
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">EMAIL</label>
        <input type="email" class="form-control" id="exampleFormControlInput1" name="email" disabled
          value="<%= foundUser.email %>" placeholder="Enter your email">
      </div>
      <input class="btn btn-primary" id="submit" type="submit" value="Edit Account">
    </form>

  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.0/axios.min.js"></script>

  <script>

    var inp = document.querySelector("#inp")

    inp.addEventListener("input", function () {
      if (inp.value.length > 0) {
        axios.get(`/check/${inp.value}`)
          .then(function (data) {
         if(data.data){
           inp.style.boxShadow = " 0 0 10px red"
           document.querySelector("#submit").setAttribute("disabled",true)
         }
         else{
          inp.style.boxShadow = " 0 0 0px black"
           document.querySelector("#submit").removeAttribute("disabled",false)
         }
          })
      }
    })

  </script>


</body>

</html>